<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="Submission" content="/tmp/codecheck/17101916226336314404362089208/submission"/>
<meta name="Problem" content="1710072317eln17edarc25aqtdwg528ocf2"/>
<meta name="Level" content="1"/>
<meta name="Time" content="2017-10-19T16:22:58Z"/>
<meta name="ID" content="Book"/>
<meta name="Elapsed" content="6580 ms"/>
<style type="text/css">
.header {font-weight: bold; font-size: 1.2em; }
.item {font-weight: bold;}
.pass {color: green;}
.fail {color: red;}
.note {color: blue; font-weight: bold;}
table.file td {padding-right: 1em; background: #FFF; }
.linenumber {color: gray;}
.footnote {font-size: 0.7em;}
table {font-size: 0.9em;}
td, th { background: #EEE; margin: 0.5em; padding: 0.25em;}
table.output td {vertical-align: top;}
div.footnotes { border-top: 1px solid gray; padding-top: 0.5em; }
</style>
<title>Report</title>
</head>
<body>
<p class="header run">Testing BookListsApp.cpp</p>
<div class="run">
<pre class="output">
</pre>
<pre class="output">
Book list: science

Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher}
Book{ISBN=978-0134177304, last=Horstmann, first=Cay, title=Core Java Volume I--Fundamentals}
Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers}
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++}
Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design}
Book{ISBN=978-0553380163, last=Hawking, first=Stephen, title=A Brief History of Time}
Book{ISBN=978-1420946338, last=Einstein, first=Albert, title=Relativity: The Special and General Theory}
Book{ISBN=978-1490592152, last=Newton, first=Isaac, title=The Principia}
  (8 books)

Book list: history

Book{ISBN=978-0060854935, last=Kennedy, first=John, title=Profiles in Courage}
Book{ISBN=978-0195144031, last=Kennedy, first=David, title=Freedom from Fear}
Book{ISBN=978-0345308238, last=Tuchman, first=Barbara, title=The March of Folly: From Troy to Vietnam}
Book{ISBN=978-0345324252, last=Tuchman, first=Barbara, title=The Zimmermann Telegram}
Book{ISBN=978-0345476098, last=Tuchman, first=Barbara, title=The Guns of August}
Book{ISBN=978-0671869205, last=McCullough, first=David, title=Truman}
Book{ISBN=978-0743226721, last=McCullough, first=David, title=1776}
  (7 books)

Book list: mystery

Book{ISBN=978-0307743657, last=King, first=Stephen, title=The Shining}
Book{ISBN=978-0385543026, last=Grisham, first=John, title=Camino Island: A Novel}
Book{ISBN=978-1501175466, last=King, first=Stephen, title=It: A Novel}
Book{ISBN=978-9176372265, last=Doyle, first=Conon, title=The Adventures of Sherlock Holmes}
  (4 books)

Book list: childrens

Book{ISBN=978-0060256654, last=Silverstein, first=Shel, title=The Giving Tree}
Book{ISBN=978-0439708180, last=Rowling, first=J., title=Harry Potter and the Sorcerer's Stone}
Book{ISBN=978-0694003617, last=Brown, first=Margaret, title=Goodnight Moon}
  (3 books)

Book list: MERGED

Book{ISBN=978-0060256654, last=Silverstein, first=Shel, title=The Giving Tree}
Book{ISBN=978-0060854935, last=Kennedy, first=John, title=Profiles in Courage}
Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher}
Book{ISBN=978-0134177304, last=Horstmann, first=Cay, title=Core Java Volume I--Fundamentals}
Book{ISBN=978-0195144031, last=Kennedy, first=David, title=Freedom from Fear}
Book{ISBN=978-0307743657, last=King, first=Stephen, title=The Shining}
Book{ISBN=978-0345308238, last=Tuchman, first=Barbara, title=The March of Folly: From Troy to Vietnam}
Book{ISBN=978-0345324252, last=Tuchman, first=Barbara, title=The Zimmermann Telegram}
Book{ISBN=978-0345476098, last=Tuchman, first=Barbara, title=The Guns of August}
Book{ISBN=978-0385543026, last=Grisham, first=John, title=Camino Island: A Novel}
Book{ISBN=978-0439708180, last=Rowling, first=J., title=Harry Potter and the Sorcerer's Stone}
Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers}
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++}
Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design}
Book{ISBN=978-0553380163, last=Hawking, first=Stephen, title=A Brief History of Time}
Book{ISBN=978-0671869205, last=McCullough, first=David, title=Truman}
Book{ISBN=978-0694003617, last=Brown, first=Margaret, title=Goodnight Moon}
Book{ISBN=978-0743226721, last=McCullough, first=David, title=1776}
Book{ISBN=978-1420946338, last=Einstein, first=Albert, title=Relativity: The Special and General Theory}
Book{ISBN=978-1490592152, last=Newton, first=Isaac, title=The Principia}
Book{ISBN=978-1501175466, last=King, first=Stephen, title=It: A Novel}
Book{ISBN=978-9176372265, last=Doyle, first=Conon, title=The Adventures of Sherlock Holmes}
  (22 books)

Book list: AUTHORS A-M

Book{ISBN=978-0060854935, last=Kennedy, first=John, title=Profiles in Courage}
Book{ISBN=978-0130460417, last=Mak, first=Ronald, title=Java Number Cruncher}
Book{ISBN=978-0134177304, last=Horstmann, first=Cay, title=Core Java Volume I--Fundamentals}
Book{ISBN=978-0195144031, last=Kennedy, first=David, title=Freedom from Fear}
Book{ISBN=978-0307743657, last=King, first=Stephen, title=The Shining}
Book{ISBN=978-0385543026, last=Grisham, first=John, title=Camino Island: A Novel}
Book{ISBN=978-0470177075, last=Mak, first=Ronald, title=Writing Compilers}
Book{ISBN=978-0470383285, last=Horstmann, first=Cay, title=Big C++}
Book{ISBN=978-0471744870, last=Horstmann, first=Cay, title=Object-Oriented Design}
Book{ISBN=978-0553380163, last=Hawking, first=Stephen, title=A Brief History of Time}
Book{ISBN=978-0671869205, last=McCullough, first=David, title=Truman}
Book{ISBN=978-0694003617, last=Brown, first=Margaret, title=Goodnight Moon}
Book{ISBN=978-0743226721, last=McCullough, first=David, title=1776}
Book{ISBN=978-1420946338, last=Einstein, first=Albert, title=Relativity: The Special and General Theory}
Book{ISBN=978-1501175466, last=King, first=Stephen, title=It: A Novel}
Book{ISBN=978-9176372265, last=Doyle, first=Conon, title=The Adventures of Sherlock Holmes}
  (16 books)

Book list: AUTHORS N_Z

Book{ISBN=978-0060256654, last=Silverstein, first=Shel, title=The Giving Tree}
Book{ISBN=978-0345308238, last=Tuchman, first=Barbara, title=The March of Folly: From Troy to Vietnam}
Book{ISBN=978-0345324252, last=Tuchman, first=Barbara, title=The Zimmermann Telegram}
Book{ISBN=978-0345476098, last=Tuchman, first=Barbara, title=The Guns of August}
Book{ISBN=978-0439708180, last=Rowling, first=J., title=Harry Potter and the Sorcerer's Stone}
Book{ISBN=978-1490592152, last=Newton, first=Isaac, title=The Principia}
  (6 books)

</pre>
<span class="pass">pass </span></div>
<p class="header studentFiles">Student files</p>
<div class="studentFiles">
<p class="caption">Book.cpp:</p>
<pre>/***** Complete this file. *****/
#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdio.h&gt;
#include "Book.h"

using namespace std;


Book::Book():isbn(""), last(""), first(""), title(""){}

Book::Book(string _isbn, string _last, string _first, string _title):isbn(_isbn), last(_last), first(_first), title(_title){}

// ostream&amp; operator &lt;&lt;(ostream&amp; outs, const Book::Category&amp; category)
// {
//  switch (category)
//  {
//     case 0:  outs &lt;&lt; "fiction";   break;
//     case 1:  outs &lt;&lt; "history";   break;
//     case 2: outs &lt;&lt; "technical";  break;
//     case 3:   outs &lt;&lt; "none";     break;
//  }

//  return outs;
// }

ostream&amp; operator &lt;&lt; (ostream&amp; out, Book&amp; book)
{
   out &lt;&lt; "Book{ISBN=" &lt;&lt; book.isbn &lt;&lt; ", last=" &lt;&lt; book.last &lt;&lt; ", first=" &lt;&lt; book.first &lt;&lt; ", title=" &lt;&lt; book.title &lt;&lt; "}" &lt;&lt; endl;
   return out;
}

istream&amp; operator &gt;&gt; (istream&amp; in, Book&amp; book)
{
//    in.get(); //skip the blank after the command
    getline (in, book.isbn, ',');
    getline (in, book.last, ',');
    getline (in, book.first, ',');
    getline (in, book.title);

    return in;
}

string Book::get_isbn() {return isbn;}

string Book::get_last() { return last; }

string Book::get_first()  { return first; }

string Book::get_title()  { return title; }

// Book::Category Book::get_category() const { return category; }

Book::~Book(){}



</pre>
<p class="caption">Book.h:</p>
<pre>#ifndef BOOK_H_
#define BOOK_H_

#include &lt;string&gt;
using namespace std;

/***** Complete this file. *****/

/**
 * The Book class.
 */
class Book
{
public:
    /**
     * Book categories.
     */
   //  enum class Category { FICTION, HISTORY, TECHNICAL, NONE };

    /**
     * Default constructor.
     */
    Book();

    /**
     * Constructor.
     */
    Book(string isbn, string last, string first, string title);
    /**
     * Input a Book
     */
   friend istream&amp; operator &gt;&gt; (istream&amp; in, Book&amp; book);
    /**
     * Print a Book
     */
   friend ostream&amp; operator &lt;&lt; (ostream&amp; out, Book&amp; book);
    /**
     * Destructor.
     */
   //getter function
   string get_isbn();
   string get_last();
   string get_first();
   string get_title();
   // string get_category();
    ~Book();

    /***** Complete the public members. *****/

private:
   string isbn;
   string last;
   string first;
   string title;
   // Category category;
};

#endif /* EMPLOYEE_H_ */
</pre>
<p class="caption">BookList.cpp:</p>
<pre>#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdio.h&gt;
#include "BookList.h"
#include "BookNode.h"
#include "Book.h"

using namespace std;

BookList::BookList(const string name)
    : name(name), head(nullptr), tail(nullptr)
{
//    create();
}

BookNode* BookList::get_head()
{
	return head;
}


void BookList::print()
{
 cout &lt;&lt; "Book list: " &lt;&lt; name &lt;&lt; endl &lt;&lt; endl;
 int count = 0;
 if (head != nullptr)
    {
	 BookNode *cur = head;
	 Book cur_book = cur-&gt;get_book();
	 cout &lt;&lt; cur_book;
	 count++;
	 while(cur-&gt;get_next())
	 {
//		cout &lt;&lt; "printing the next book" &lt;&lt; endl;
		 cur = cur-&gt;get_next();
		cur_book = cur-&gt;get_book();
		cout &lt;&lt; cur_book;
		count++;
	 }
	 cout &lt;&lt; "  (" &lt;&lt; count &lt;&lt; " books)" &lt;&lt; endl &lt;&lt; endl;
    }
}

int BookList::find(Book book)
{
	if (head == nullptr) return -1;
	else
	{
		string isbn = book.get_isbn();
		BookNode* cur = head;
		Book cur_book = cur-&gt;get_book();
		string cur_isbn = cur_book.get_isbn();
		if (cur_isbn == isbn) return 1;
		else if (head-&gt;get_next() == nullptr) return -1;
		else
		{
			while(cur-&gt;get_next() != nullptr)
			{
				cur = cur-&gt;get_next();
				cur_book = cur-&gt;get_book();
				cur_isbn = cur_book.get_isbn();
				if (cur_isbn == isbn) return 1;
			}
			return -1;
		}
	}
}

void BookList::insert(Book book)
{
	BookNode* booknode = new BookNode(book);
//	cout &lt;&lt; "head is " &lt;&lt; head &lt;&lt; endl;
	if (head == nullptr)
	{
		head = booknode;
//		cout &lt;&lt; "1" &lt;&lt; endl;
		return;
	}
	else
	{
		string isbn = book.get_isbn();
		BookNode* cur = head;
		Book cur_book = cur-&gt;get_book();
		string cur_isbn = cur_book.get_isbn();
		BookNode* next = cur-&gt;get_next();
//		cout &lt;&lt; "head next is " &lt;&lt; head-&gt;get_next() &lt;&lt; endl;
		if (isbn &lt; cur_isbn)
		{
			head = booknode;
			head-&gt;set_next(cur);
//				cout &lt;&lt; "2" &lt;&lt; endl;
			return;
		}
		else
		{
			if (next == nullptr)
			{
				head-&gt;set_next(booknode);
		//				tail = &amp;booknode;
		//				cout &lt;&lt; "3" &lt;&lt; endl;
		//				cout &lt;&lt; "now head next is " &lt;&lt; head-&gt;get_next() &lt;&lt; endl;
				return;

			}
			else
			{
				BookNode* next = cur-&gt;get_next();
				Book next_book = next-&gt;get_book();
				string next_isbn = next_book.get_isbn();
				while(next-&gt;get_next())
				{
					if (next_isbn &gt; isbn)
					{
						cur-&gt;set_next( booknode);
						booknode-&gt;set_next(next);
	//					cout &lt;&lt; "4" &lt;&lt; endl;
						return;
					}
					else
					{
						cur = next;
						next = next-&gt;get_next();
						next_book = next-&gt;get_book();
						next_isbn = next_book.get_isbn();
					}
				}
				if (next_isbn &gt; isbn)
				{
					cur-&gt;set_next( booknode);
					booknode-&gt;set_next(next);
	//				cout &lt;&lt; "5" &lt;&lt; endl;
					return;
				}
				else
				{
					next-&gt;set_next(booknode);
	//				cout &lt;&lt; "6" &lt;&lt; endl;
					return;
				}
			}
		}


	}

}

void BookList::merge_lists(BookList&amp; list1)
{
	BookNode* cur = list1.head;
	if (cur == nullptr) return;
	else
	{
		BookNode* next = cur-&gt;get_next();
		Book cur_book = cur-&gt;get_book();

		while(next != nullptr)
		{
			if (this-&gt;find(cur_book) == -1) this-&gt;insert(cur_book);
//			cout &lt;&lt; "1 merging " &lt;&lt; cur_book;
			cur = next;
			cur_book = cur-&gt;get_book();
			next = next-&gt;get_next();
		}

		if (this-&gt;find(cur_book) == -1) this-&gt;insert(cur_book);
//		cout &lt;&lt; "2 merging " &lt;&lt; cur_book;
	        return;
	}
}




</pre>
<p class="caption">BookList.h:</p>
<pre>/*
 * BookList.h
 *
 *  Created on: Oct 17, 2017
 *      Author: yulu9206
 */

#ifndef BOOKLIST_H_
#define BOOKLIST_H_

#include &lt;string&gt;
#include "BookNode.h"
#include "Book.h"
using namespace std;

class BookList
{
public:
    /**
     * Constructor.
     * @param name the name of this list.
     */
    BookList(const string name);

    BookNode* get_head();
    /**
     * Print the list.
     */
    void print();

    void insert(Book book);

    int find(Book book);
    void merge_lists(BookList&amp; list1);
private:
    string name;      // name of this book list
    BookNode *head;   // head of the list of book nodes
    BookNode *tail;   // tail of the list of book nodes
};

#endif /* BOOKLIST_H_ */
</pre>
<p class="caption">BookListsApp.cpp:</p>
<pre>#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdio.h&gt;
#include "Book.h"
#include "BookNode.h"
#include "BookList.h"

using namespace std;

const string CATEGORIES_FILE_NAME = "categories.txt";

BookList creat_booklist(string category);

void sort_author(BookList&amp; list, BookList&amp; alist, BookList&amp; nlist);

int main()
{
   cout &lt;&lt; endl;
  ifstream input;
  input.open(CATEGORIES_FILE_NAME);
  if (input.fail())
  {
      cout &lt;&lt; "Failed to open " &lt;&lt; CATEGORIES_FILE_NAME &lt;&lt; endl;
      return -1;
  }
  while (!input.fail())
  {
	  vector&lt;string&gt; categories;
	  string category;
	  while(getline(input, category))
          {
		  categories.push_back(category);
          }
	  input.close();
	  vector&lt;BookList&gt; lists;
	  for(auto category : categories)
	  {
		  BookList list = creat_booklist(category);
		  list.print();
		  lists.push_back(list);
	  }

	  BookList merge_list("MERGED");
	  for(auto list : lists)
	  {
//		  list.print();
		  merge_list.merge_lists(list);
	  }
	  merge_list.print();
	  BookList alist("AUTHORS A-M");
	  BookList nlist("AUTHORS N_Z");
	  sort_author(merge_list, alist, nlist);
	  alist.print();
	  nlist.print();
  }

    return 0;
}


BookList creat_booklist(string category)
{
	  BookList list(category);
	  string INPUT_FILE_NAME = category + ".txt";
	  ifstream input;
	  input.open(INPUT_FILE_NAME);
	  if (input.fail())
	  {
	      cout &lt;&lt; "Failed to open " &lt;&lt; INPUT_FILE_NAME &lt;&lt; endl;
	  }
	  Book cur_book;
	  while (input &gt;&gt; cur_book)
	  {
		  if (list.find(cur_book) == -1)
		  {
			  list.insert(cur_book);
		  }
	  }
//	  list.print();
          input.close();
          return list;
}

void sort_author(BookList&amp; list, BookList&amp; alist, BookList&amp; nlist)
{
	BookNode* cur = list.get_head();
	if (cur == nullptr) return;
	else
	{
		BookNode* next = cur-&gt;get_next();
		Book cur_book = cur-&gt;get_book();
		string cur_last = cur_book.get_last();
		char cur_ini = cur_last[0];
		while(next != nullptr)
		{
			if (cur_ini &lt; 'N') alist.insert(cur_book);
			else nlist.insert(cur_book);
			cur = next;
			cur_book = cur-&gt;get_book();
			cur_last = cur_book.get_last();
			cur_ini = cur_last[0];
			next = next-&gt;get_next();
		}

		if (cur_ini &lt; 'N') alist.insert(cur_book);
		else nlist.insert(cur_book);
	        return;
	}
}

</pre>
<p class="caption">BookNode.cpp:</p>
<pre>#include &lt;iostream&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;vector&gt;
#include &lt;stdio.h&gt;
#include "BookNode.h"
#include "Book.h"

using namespace std;


BookNode::BookNode(Book book):book(book), next(nullptr){}
Book BookNode::get_book(){return book;}
BookNode * BookNode::get_next(){return next;}
void BookNode::set_next(BookNode* nextptr){next = nextptr;}
</pre>
<p class="caption">BookNode.h:</p>
<pre>/*
 * BookNode.h
 *
 *  Created on: Oct 17, 2017
 *      Author: yulu9206
 */

#ifndef BOOKNODE_H_
#define BOOKNODE_H_

#include "Book.h"

/**
 * A book node in a linked list.
 */
class BookNode
{
public:
    /**
     * Constructor.
     * @param book this node's book.
     */
    BookNode(Book book);

    Book get_book();
    BookNode * get_next();
    void set_next(BookNode* nextptr);

private:
    Book book;       // this node's book
    BookNode *next;  // link to the next node in the list
};



#endif /* BOOKNODE_H_ */
</pre>
</div>
<p class="header providedFiles">Provided files</p>
<div class="providedFiles">
<p class="caption">categories.txt:</p>
<pre>science
history
mystery
childrens
</pre>
<p class="caption">childrens.txt:</p>
<pre>978-0439708180,Rowling,J.,Harry Potter and the Sorcerer's Stone
978-0060256654,Silverstein,Shel,The Giving Tree
978-0694003617,Brown,Margaret,Goodnight Moon
</pre>
<p class="caption">history.txt:</p>
<pre>978-0195144031,Kennedy,David,Freedom from Fear
978-0345476098,Tuchman,Barbara,The Guns of August
978-0671869205,McCullough,David,Truman
978-0345308238,Tuchman,Barbara,The March of Folly: From Troy to Vietnam
978-0345324252,Tuchman,Barbara,The Zimmermann Telegram
978-0743226721,McCullough,David,1776
978-0345308238,Tuchman,Barbara,The March of Folly: From Troy to Vietnam
978-0060854935,Kennedy,John,Profiles in Courage
</pre>
<p class="caption">mystery.txt:</p>
<pre>978-1501175466,King,Stephen,It: A Novel
978-9176372265,Doyle,Conon,The Adventures of Sherlock Holmes
978-0307743657,King,Stephen,The Shining
978-0385543026,Grisham,John,Camino Island: A Novel
</pre>
<p class="caption">science.txt:</p>
<pre>978-1420946338,Einstein,Albert,Relativity: The Special and General Theory
978-1490592152,Newton,Isaac,The Principia
978-0553380163,Hawking,Stephen,A Brief History of Time
978-0471744870,Horstmann,Cay,Object-Oriented Design
978-0130460417,Mak,Ronald,Java Number Cruncher
978-0470383285,Horstmann,Cay,Big C++
978-0470177075,Mak,Ronald,Writing Compilers
978-0134177304,Horstmann,Cay,Core Java Volume I--Fundamentals
978-1490592152,Newton,Isaac,The Principia
</pre>
</div>
<p class="header score">Score</p>
<div class="score">
<p class="score">1/1</p>
</div>
<div class="footnotes"><div class="footnote">2017-10-19T16:22:58Z</div>
</div>
</body></html>
